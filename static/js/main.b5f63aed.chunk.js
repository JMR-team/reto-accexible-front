(this["webpackJsonpreto-accexible-front"]=this["webpackJsonpreto-accexible-front"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(14),i=n.n(a),r=(n(33),n(13)),o=n(7),l=n(3),j=[{title:"Inicio",url:"/",showAlways:!0},{title:"Iniciar Test",url:"/test-ansiedad",showAlways:!0},{title:"Historial",url:"/dashboard",showOnlyForLogged:!0},{title:"Login",url:"/login"},{title:"Registro",url:"/signup"}],u=(n(34),n.p+"static/media/accexible-logo.a56af421.png"),b=n(0);function d(){var e=Object(o.f)(),t=Object(c.useState)(null!=localStorage.getItem("token")),n=Object(l.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(!1),d=Object(l.a)(i,2),h=d[0],O=d[1];Object(c.useEffect)((function(){null==localStorage.getItem("token")?a(!1):a(!0)}),[localStorage.getItem("token")]);var m=function(){O(!h)},f=j.filter((function(e){var t=e.showAlways,n=e.showOnlyForLogged;return t||s&&n||!s&&!n})).map((function(e,t){var n=e.url,c=e.title;return Object(b.jsx)("li",{children:Object(b.jsx)(r.c,{onClick:m,exact:!0,to:n,activeClassName:"active",children:c})},t)}));return Object(b.jsxs)("nav",{children:[Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)(r.b,{className:"link",to:"/",children:Object(b.jsx)("img",{src:u,alt:"logo AcceXible"})})}),Object(b.jsx)("div",{className:"menu-icon",onClick:m,children:Object(b.jsx)("i",{className:h?"fas fa-times":"fas fa-bars"})}),Object(b.jsxs)("ul",{className:h?"menu-list":"menu-list close",children:[f,s?Object(b.jsx)("button",{className:"closeButton",onClick:function(){localStorage.clear(),e("/")}}):null]})]})}n(36);function h(e){var t=e.image,n=e.title,c=e.text;return Object(b.jsx)("div",{className:"servicesSection",children:Object(b.jsx)("div",{className:"service",children:Object(b.jsxs)("div",{className:"service-content",children:[Object(b.jsx)("img",{src:t,alt:""}),Object(b.jsx)("h5",{className:"s-title",children:n}),Object(b.jsx)("p",{className:"s-text",children:c})]})})})}n(37);var O=n.p+"static/media/logotipo.bbk.49cd3168.svg",m=n.p+"static/media/logocode4jobs.bd88943a.svg";function f(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"header",children:Object(b.jsx)("img",{className:"headerImg",src:"https://images-ext-2.discordapp.net/external/gUyG6SbaJrMWT5_P1TQuNvFpXzibV569HqBRvW4HRBA/https/i.imgur.com/IGWfqHIh.jpg",alt:"imagen del Header"})}),Object(b.jsxs)("div",{className:"containerHeader",children:[Object(b.jsx)("h1",{className:"titleHeader",children:"Salud Mental Accesible Para Tod@s"}),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"containerButton",children:Object(b.jsx)(r.b,{className:"link",to:"/test-ansiedad",children:Object(b.jsx)("button",{className:"buttonHeader",children:"Iniciar Test"})})})]}),Object(b.jsxs)("div",{className:"services-container",children:[Object(b.jsx)(h,{image:O,title:"RETO BBK BOOTCAMP",text:"Sistema de prueba para la detecci\xf3n de s\xedntomas depresivos, cuadros de ansiedad e indicativos de necesidad de atenci\xf3n psicol\xf3gica."}),Object(b.jsx)(h,{image:m,title:"EQUIPO BREATHE",text:["Reto realizado por: ",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"- Joseba I\xf1aki Garc\xeda Barrenengoa",Object(b.jsx)("br",{}),"- Miguel \xc1ngel Sim\xf3n Mart\xednez",Object(b.jsx)("br",{}),"- Roque Carrillo Mart\xednez"]})]})]})}n(38);function x(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsxs)("div",{className:"containerFooter",children:[Object(b.jsx)("div",{className:"box",children:Object(b.jsx)("figure",{children:Object(b.jsx)("img",{src:u,alt:"logo AcceXible"})})}),Object(b.jsxs)("div",{className:"box",children:[Object(b.jsx)("h2",{children:"Barcelona"}),Object(b.jsx)("p",{children:"Barcelona Tech City"}),Object(b.jsx)("p",{children:"Pla\xe7a de Pau Vila, 1 Bloc A, Planta 3, Porta 3A1, 08003"})]}),Object(b.jsxs)("div",{class:"box",children:[Object(b.jsx)("h2",{children:"Bilbao"}),Object(b.jsx)("p",{children:"INNOLAB Bilbao"}),Object(b.jsx)("p",{children:"Gordoniz 44, 48002"})]}),Object(b.jsxs)("div",{className:"box",children:[Object(b.jsx)("h2",{children:"Contacta Con Nosotros"}),Object(b.jsxs)("div",{className:"social",children:[Object(b.jsx)("a",{href:"https://twitter.com/accexible",target:"_blank",className:"fab fa-twitter"}),Object(b.jsx)("a",{href:"https://www.linkedin.com/company/accexible/?originalSubdomain=es",target:"_blank",className:"fab fa-linkedin-in"})]})]})]}),Object(b.jsx)("div",{className:"containerInfoFooter",children:Object(b.jsxs)("small",{children:["\xa9 2021 ",Object(b.jsx)("b",{children:"Code4Jobs"})," - Reto De Empresa AcceXible."]})})]})})}function g(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsx)(x,{})]})}var p=n(6),v=n(17);n(39);function N(e){var t=Object(o.f)(),n=Object(c.useState)(localStorage.getItem("token")),s=Object(l.a)(n,2),a=s[0],i=s[1],r=Object(c.useState)({email:"",password:""}),j=Object(l.a)(r,2),u=j[0],d=j[1],h=Object(c.useState)(!1),O=Object(l.a)(h,2),m=O[0],f=O[1],x=Object(c.useState)(!0),g=Object(l.a)(x,2),N=g[0],S=g[1],C=Object(c.useState)(!1),w=Object(l.a)(C,2),y=w[0],k=w[1];return Object(c.useEffect)((function(){null!=a&&(localStorage.setItem("token",a),t("/"))}),[a]),Object(c.useEffect)((function(){f(v.validate(u.email)&&u.password.length>0)}),[u]),Object(b.jsx)("section",{className:"loginRegisterSection",children:Object(b.jsxs)("div",{className:"loginRegisterContainer",children:[Object(b.jsx)("h2",{children:"Iniciar Sesi\xf3n:"}),Object(b.jsxs)("div",{className:"loginForm",children:[Object(b.jsx)("input",{className:"loginInput",value:u.email,type:"text",placeholder:"correo electr\xf3nico",onChange:function(e){!function(e){var t=e.target.value;S(v.validate(t))}(e),d(Object(p.a)(Object(p.a)({},u),{},{email:e.target.value}))}}),N?null:Object(b.jsx)("p",{className:"emailError",children:Object(b.jsx)("small",{children:"Formato de correo electr\xf3nico incorrecto"})})]}),Object(b.jsxs)("div",{className:"loginForm",children:[Object(b.jsx)("input",{className:"loginInput",value:u.password,type:"password",placeholder:"contrase\xf1a",onChange:function(e){return d(Object(p.a)(Object(p.a)({},u),{},{password:e.target.value}))}}),Object(b.jsx)("p",{children:Object(b.jsx)("small",{})})]}),Object(b.jsx)("div",{className:"loginForm",children:Object(b.jsx)("button",{className:"loginButton",type:"button",disabled:!m,onClick:function(){fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){i(e.token)})).catch((function(e){k(!0)}))},children:"Iniciar sesi\xf3n"})}),y?Object(b.jsx)("p",{className:"emailError",children:Object(b.jsx)("small",{children:"Email y/o contrase\xf1a incorrectos!"})}):null]})})}n(40);function S(e){var t=Object(o.f)(),n=Object(c.useState)(localStorage.getItem("token")),s=Object(l.a)(n,2),a=s[0],i=s[1],r=Object(c.useState)(!1),j=Object(l.a)(r,2),u=(j[0],j[1],Object(c.useState)({email:"",firstName:"",lastName:"",password:""})),d=Object(l.a)(u,2),h=d[0],O=d[1],m=Object(c.useState)(!1),f=Object(l.a)(m,2),x=f[0],g=f[1],N=Object(c.useState)(!0),S=Object(l.a)(N,2),C=S[0],w=S[1],y=Object(c.useState)(!1),k=Object(l.a)(y,2),I=k[0],F=k[1];return Object(c.useEffect)((function(){null!=a&&(localStorage.setItem("token",a),t("/"))}),[a]),Object(c.useEffect)((function(){g(v.validate(h.email)&&h.password.length>0&&h.firstName.length>0&&h.lastName.length>0)}),[h]),Object(b.jsx)("section",{className:"signRegisterSection",children:Object(b.jsxs)("div",{className:"signRegisterContainer",children:[Object(b.jsx)("h2",{children:"Registrar nuevo usuario:"}),Object(b.jsx)("div",{className:"signForm",children:Object(b.jsx)("input",{className:"signInput",value:h.firstName,type:"text",placeholder:"Nombre",onChange:function(e){return O(Object(p.a)(Object(p.a)({},h),{},{firstName:e.target.value}))}})}),Object(b.jsx)("div",{className:"signForm",children:Object(b.jsx)("input",{className:"signInput",value:h.lastName,type:"text",placeholder:"Apellidos",onChange:function(e){return O(Object(p.a)(Object(p.a)({},h),{},{lastName:e.target.value}))}})}),Object(b.jsxs)("div",{className:"signForm",children:[Object(b.jsx)("input",{className:"signInput",value:h.email,type:"email",placeholder:"Correo electr\xf3nico",onChange:function(e){O(Object(p.a)(Object(p.a)({},h),{},{email:e.target.value})),function(e){var t=e.target.value;w(v.validate(t))}(e)}}),C?null:Object(b.jsx)("p",{className:"emailError",children:Object(b.jsx)("small",{children:"Formato de correo electr\xf3nico incorrecto"})})]}),Object(b.jsx)("div",{className:"signForm",children:Object(b.jsx)("input",{className:"signInput",value:h.password,type:"password",placeholder:"contrase\xf1a",onChange:function(e){return O(Object(p.a)(Object(p.a)({},h),{},{password:e.target.value}))}})}),Object(b.jsx)("div",{className:"signForm",children:Object(b.jsx)("button",{type:"button",className:"signButton",disabled:!x,onClick:function(){fetch("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){i(e.token)})).catch((function(e){F(!0)}))},children:"Registro"})}),I?Object(b.jsx)("p",{className:"emailError",children:Object(b.jsx)("small",{children:"La direcci\xf3n de correo ya est\xe1 siendo usada por otro usuario."})}):null]})})}var C=n(9),w=n(15),y=n.n(w),k=(n(44),n(4)),I=n(5),F=function(){function e(t,n,c,s,a,i){Object(k.a)(this,e),this.createChatbotMessage=t,this.setState=n,this.createClientMessage=c,this.setShowChatBot=i.setShowChatBot,this.state=s,this.setUserAnswers=i.setUserAnswers,this.setChatting=i.setChatting}return Object(I.a)(e,[{key:"handleShortMessage",value:function(){var e=this,t=["Para que los resultados del test sean fiables necesito respuestas m\xe1s largas.","Las respuestas tienen que ser m\xe1s largas.","Necesito que escribas mensajes m\xe1s largos."],n=t[parseInt(Math.random()*t.length)];this.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{messages:[].concat(Object(C.a)(t.messages),[e.createChatbotMessage(n)])})}))}},{key:"handleUserMessageWithTiming",value:function(e,t){this.setUserAnswers((function(n){return[].concat(Object(C.a)(n),[{text:e,responseTime:t}])})),this.state.questionIndex<=this.state.questionsArray.length-1?this.nextQuestion():this.handleEndOfChat()}},{key:"handleEndOfChat",value:function(){var e=this;document.querySelector(".react-chatbot-kit-chat-input").readOnly=!0,this.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{messages:[].concat(Object(C.a)(t.messages),[e.createChatbotMessage("Gracias. Pulsa el bot\xf3n para finalizar.",{widget:"end-test"})])})}))}},{key:"nextQuestion",value:function(){var e=this;this.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{messages:[].concat(Object(C.a)(t.messages),[e.createChatbotMessage(e.state.questionsArray[e.state.questionIndex])]),questionIndex:e.state.questionIndex+1})}))}}]),e}(),A=function(){function e(t,n){Object(k.a)(this,e),this.actionProvider=t,this.state=n,this.timeStamp=Date.now()}return Object(I.a)(e,[{key:"parse",value:function(e){if(e.match(/\S+\s*/g).length<=10)this.actionProvider.handleShortMessage();else{var t=(Date.now()-this.timeStamp)/1e3;this.actionProvider.handleUserMessageWithTiming(e,t)}}}]),e}();function B(e){return e.length>0}var E=n(20);function P(e){return Object(E.useEffect)((function(){document.querySelector(".react-chatbot-kit-chat-input").readOnly=e.disableChatInput}),[]),Object(b.jsx)("div",{className:"containerButton",children:Object(b.jsx)("button",{class:"buttonTest",onClick:e.disableChatInput?function(){document.querySelector(".react-chatbot-kit-chat-input").readOnly=!1,e.actionProvider.nextQuestion(),e.setState((function(e){return Object(p.a)(Object(p.a)({},e),{},{disableChatInput:!1})}))}:null,children:"Iniciar Test"})})}function T(e){return Object(b.jsx)("div",{children:Object(b.jsx)("button",{class:"buttonTest",onClick:function(){e.setChatting(!1)},children:"Finalizar"})})}n(45);function q(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(!0),r=Object(l.a)(i,2),o=r[0],j=r[1],u=Object(c.useState)(!0),d=Object(l.a)(u,2),h=d[0],O=d[1],m=Object(c.useState)([]),f=Object(l.a)(m,2),x=f[0],g=f[1];return Object(c.useEffect)((function(){fetch("/api/chatbot-messages").then((function(e){if(e.ok)return e.json();throw e})).then((function(e){var t={widgets:[{widgetName:"start-test",widgetFunc:function(e){return Object(b.jsx)(P,Object(p.a)({},e))},mapStateToProps:["disableChatInput"]},{widgetName:"end-test",widgetFunc:function(e){return Object(b.jsx)(T,Object(p.a)({},e))},props:{setChatting:j}}]};t.initialMessages=e.filter((function(e){return"greeting"===e.type})).map((function(e){return Object(w.createChatBotMessage)(e.text,{widget:"start-test"})}));var n={timeStamp:Date.now(),questionIndex:0,disableChatInput:!0};n.questionsArray=e.filter((function(e){return"question"===e.type})).map((function(e){return e.text})),t.state=n,a(Object(p.a)({},t)),O(!1)})).catch((function(e){alert("ERROR: code ".concat(e.status,"  (").concat(e.statusText,")")),console.log(e)}))}),[]),Object(c.useEffect)((function(){o||e.setResults((function(e){return Object(p.a)(Object(p.a)({},e),{},{chatBotAnswers:Object(C.a)(x)})}))}),[o]),Object(b.jsx)("section",{className:"containerDiv",children:Object(b.jsx)("div",{className:"chatBotContainerDiv",children:!h&&o?Object(b.jsx)(y.a,{placeholderText:". . . . .",headerText:"acceXible chatbot",config:s,messageParser:A,actionProvider:F,validator:B,setUserAnswers:g,setChatting:j}):Object(b.jsx)("p",{className:"chatText",children:"Cargando ChatBot"})})})}var R=n(21),z=n.n(R),M=n(24);n(47);var L=function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)([{}]),r=Object(l.a)(i,2),o=(r[0],r[1],Object(c.useState)()),j=Object(l.a)(o,2),u=j[0],d=j[1],h=Object(c.useState)(0),O=Object(l.a)(h,2),m=O[0],f=O[1],x=Object(c.useState)(!1),g=Object(l.a)(x,2),v=g[0],N=g[1],S=Object(c.useState)([!1,!1,!1,!1]),w=Object(l.a)(S,2),y=w[0],k=w[1];return Object(c.useEffect)((function(){function e(){return(e=Object(M.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"quiz-body",children:s.length>0&&m<s.length&&Object(b.jsxs)("div",{className:"quiz-modal",children:[Object(b.jsx)("div",{className:"quiz-modal-header",children:Object(b.jsxs)("label",{className:"quiz-modal-title",children:[s[m].question," "]})}),Object(b.jsx)("br",{}),s[m].answers.map((function(e,t){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("button",{className:y[t]?"selected":"quiz-modal-option",onClick:function(){return function(e,t,n){var c=y.findIndex((function(e){return e}));c>=0&&(y[c]=!1);y[n]=!0,k(Object(C.a)(y)),N(!0),d({answerInicial:e,scoreInicial:t})}(e.text,e.score,t)},children:[e.text," "]}),Object(b.jsx)("br",{})]})})),Object(b.jsx)("br",{}),Object(b.jsx)("div",{className:"quiz-modal-footer",children:Object(b.jsxs)("div",{className:"quiz-modal-progress-controls",children:[Object(b.jsx)("p",{className:"quiz-modal-progress-current",children:"".concat(m<=s.length-1?m+1:""," / ").concat(s.length)}),Object(b.jsx)("button",{className:"quiz-modal-btn"+(v?"":" quiz-modal-btn-disabled"),onClick:v?function(){return function(){e.setResults((function(e){return Object(p.a)(Object(p.a)({},e),{},{testScore:e.testScore+u.scoreInicial})})),m===s.length-1&&e.setActualPart("chat");N(!1),k([!1,!1,!1,!1]),f(m+1)}()}:null,children:" S\xedguiente "})]})})]})})});function I(){return fetch("/api/test-questions").then((function(e){return e.json()})).then((function(e){return e}))}};n(48);var D=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(""),r=Object(l.a)(i,2),o=r[0],j=r[1];return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("section",{className:"formSection",children:Object(b.jsxs)("div",{className:"formContainer",children:[Object(b.jsx)("h2",{children:"Recibe tus Resultados Por Email"}),Object(b.jsxs)("div",{className:"loginForm",children:[Object(b.jsx)("input",{className:"loginInput",type:"email",placeholder:"Email",onChange:function(e){j(e.target.value)}}),Object(b.jsx)("br",{})]}),Object(b.jsx)("div",{className:"loginForm",children:Object(b.jsx)("input",{className:"loginInput",type:"text",placeholder:"Nombre",onChange:function(e){a(e.target.value)}})}),Object(b.jsx)("div",{className:"loginForm",children:Object(b.jsx)("button",{className:"loginButton",onClick:function(){fetch("/api/results",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({testScore:e.results.testScore,chatBotAnswers:e.results.chatBotAnswers,firstName:s,email:o})}).then((function(t){if(!t.ok)throw t;e.setActualPart("confirm-results-send")}))},children:"Enviar"})})]})})})};n(49);var H=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"emailConfirmationSection",children:Object(b.jsx)("div",{className:"emailConfirmationContainer",children:Object(b.jsxs)("div",{className:"emailContainer",children:[Object(b.jsxs)("p",{children:["El test ha sido realizado con \xe9xito. ",Object(b.jsx)("br",{}),"Los resultados han sido enviados a su email.",Object(b.jsx)("br",{})," Pulse OK para continuar:"]}),Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("button",{className:"buttonConfirmation",children:"OK"})})]})})})})};function J(e){var t=Object(c.useState)({testScore:0,chatBotAnswers:[]}),n=Object(l.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)("test"),r=Object(l.a)(i,2),o=r[0],j=r[1],u=Object(c.useState)(!1),d=Object(l.a)(u,2),h=d[0],O=d[1];Object(c.useEffect)((function(){s.chatBotAnswers.length>0&&s.testScore>0&&O(!0)}),[s]),Object(c.useEffect)((function(){h&&(null!=localStorage.getItem("token")?fetch("/api/results",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({testScore:s.testScore,chatBotAnswers:s.chatBotAnswers})}).then((function(e){if(!e.ok)throw e;j("confirm-results-send")})).catch((function(e){e.json().then(console.log)})):j("send-results"))}),[h]);var m={test:function(){return Object(b.jsx)(L,{setActualPart:j,setResults:a})},chat:function(){return Object(b.jsx)(q,{setActualPart:j,setResults:a})},"send-results":function(){return Object(b.jsx)(D,{setActualPart:j,results:s})},"confirm-results-send":function(){return Object(b.jsx)(H,{})}};localStorage.getItem("token");return Object(b.jsx)(b.Fragment,{children:m[o]()})}n(50);var U=n(26),G=n(28),W=n(11),Q=n(27),X=n(25),K=n.n(X);n(55);function V(e){var t=e.event,n=t.start,c=t.extendedProps,s=n.toLocaleString("es-ES").split(" "),a=Object(l.a)(s,2),i=a[0],r=a[1];return Object(b.jsxs)("div",{className:"results",children:[Object(b.jsx)("h3",{children:"Resultados del ".concat(i," a las ").concat(r)}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"resultsInCalendarModal",children:[Object(b.jsxs)("p",{children:["Puntuaci\xf3n del test: ",c.testScore]}),Object(b.jsxs)("p",{children:["Puntuaci\xf3n del chat: ",c.chatScore]}),Object(b.jsxs)("p",{children:["Puntuaci\xf3n total: ",c.totalScore]})]})]})}W.d.register(W.a,W.l,W.f);var _=[{id:0,threshold:5,color:"#9999FF"},{id:1,threshold:10,color:"#5555FF"},{id:2,threshold:15,color:"#0000FF"}];function Y(e){var t=Object(c.useState)(localStorage.getItem("token")),n=Object(l.a)(t,1)[0],s=Object(c.useState)(void 0),a=Object(l.a)(s,2),r=(a[0],a[1]),j=Object(c.useState)(void 0),u=Object(l.a)(j,2),d=u[0],h=u[1],O=Object(o.f)(),m=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(null==n)return O("/");fetch("/api/users",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){r(e)})),fetch("/api/results",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){h(e)}))}),[]),Object(c.useEffect)((function(){if(void 0!=d){m.current.getApi();f()}}),[d]),Object(b.jsx)(b.Fragment,{children:void 0!=d?Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("section",{className:"containerGlobal",children:[Object(b.jsx)("section",{className:"containerCalendar",children:Object(b.jsx)("div",{class:"calendar",children:Object(b.jsx)(U.a,{initialView:"dayGridMonth",plugins:[G.a],ref:m,events:d.map((function(e){var t=e.dateTime,n=e.testScore,c=e.chatScore,s=e.totalScore;return{title:"",start:t,testScore:n,chatScore:c,totalScore:s,color:_.find((function(e){var t=e.threshold;return s<=t})).color}})),displayEventTime:!0,eventDisplay:"block",eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventClick:function(e){var t=document.createElement("div");i.a.render(Object(b.jsx)(V,{event:e.event}),t);var n=t.firstChild;K()({content:n})}})})}),Object(b.jsx)("section",{className:"containerDonut",children:Object(b.jsx)("div",{className:"donut",children:Object(b.jsx)(Q.a,{data:f()})})})]})}):null});function f(){var e=[0,0,0];return d.forEach((function(t){var n=t.totalScore,c=_.findIndex((function(e){var t=e.threshold;return n<=t}));c>=0&&(e[c]+=1)})),{labels:["Sin signos de depresi\xf3n","Signos depresivos leves","Signos depresivos severos"],datasets:[{label:"Nivel de ansiedad/depresi\xf3n",data:e,backgroundColor:_.map((function(e){return e.color})),borderWidth:1}]}}}var Z=function(){return Object(b.jsx)("div",{children:Object(b.jsxs)(r.a,{children:[Object(b.jsx)(d,{}),Object(b.jsx)("main",{children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{path:"/",element:Object(b.jsx)(g,{})}),Object(b.jsx)(o.a,{path:"/test-ansiedad",element:Object(b.jsx)(J,{})}),Object(b.jsx)(o.a,{path:"/login",element:Object(b.jsx)(N,{})}),Object(b.jsx)(o.a,{path:"/signup",element:Object(b.jsx)(S,{})}),Object(b.jsx)(o.a,{path:"/dashboard",element:Object(b.jsx)(Y,{})})]})})]})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(Z,{})}),document.getElementById("root")),$()}},[[56,1,2]]]);
//# sourceMappingURL=main.b5f63aed.chunk.js.map